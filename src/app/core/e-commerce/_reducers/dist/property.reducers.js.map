{"version":3,"sources":["property.reducers.ts"],"names":[],"mappings":"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","file":"property.reducers.js","sourcesContent":["import { createFeatureSelector } from '@ngrx/store';\r\nimport { EntityState, EntityAdapter, createEntityAdapter, Update } from '@ngrx/entity';\r\n\r\nimport { PropertyActions, PropertyActionTypes } from '../_actions/property.actions';\r\nimport { PropertyModel } from '../_models/property.model';\r\nimport { QueryParamsModel } from '../../_base/crud';\r\n\r\nexport interface PropertiesState extends EntityState<PropertyModel> {\r\n\r\n  listLoading: boolean;\r\n\r\n  actionsloading: boolean;\r\n\r\n  totalCount: number;\r\n\r\n  lastQuery: QueryParamsModel;\r\n\r\n  lastCreatedPropertyId: string;\r\n\r\n  showInitWaitingMessage: boolean;\r\n}\r\n\r\nexport const adapter: EntityAdapter<PropertyModel> = createEntityAdapter<PropertyModel>();\r\n\r\nexport const initialPropertiesState: PropertiesState = adapter.getInitialState({\r\n  listLoading: false,\r\n  actionsloading: false,\r\n  totalCount: 0,\r\n  lastQuery: new QueryParamsModel({}),\r\n  lastCreatedPropertyId: undefined,\r\n  showInitWaitingMessage: true\r\n});\r\n\r\nexport function propertiesReducer(state = initialPropertiesState, action: PropertyActions): PropertiesState {\r\n\r\n  switch (action.type) {\r\n    case PropertyActionTypes.PropertiesPageToggleLoading:\r\n      return {\r\n        ...state, listLoading: action.payload.isLoading, lastCreatedPropertyId: undefined\r\n      };\r\n    case PropertyActionTypes.PropertiesActionToggleLoading:\r\n      return {\r\n        ...state, actionsloading: action.payload.isLoading\r\n      };\r\n    case PropertyActionTypes.PropertyOnServerCreated:\r\n      return {\r\n        ...state\r\n      };\r\n    case PropertyActionTypes.PropertyCreated:\r\n      return adapter.addOne(action.payload.property, {\r\n        ...state, lastCreatedPropertyId: action.payload.property.id\r\n      });\r\n    case PropertyActionTypes.PropertyUpdated:\r\n      return adapter.updateOne(action.payload.partialProperty, state);\r\n    case PropertyActionTypes.PropertiesStatusUpdated: {\r\n      // tslint:disable-next-line\r\n      const _partialProperties: Update<PropertyModel>[] = [];\r\n      // tslint:disable-next-line\r\n      for (let i = 0; i < action.payload.properties.length; i++) {\r\n        _partialProperties.push({\r\n          id: action.payload.properties[i].id,\r\n          changes: {\r\n            // status: action.payload.status\r\n          }\r\n        });\r\n      }\r\n      return adapter.updateMany(_partialProperties, state);\r\n    }\r\n    case PropertyActionTypes.OnePropertyDeleted:\r\n      return adapter.removeOne(action.payload.id, state);\r\n    case PropertyActionTypes.ManyPropertiesDeleted:\r\n      return adapter.removeMany(action.payload.ids, state);\r\n    case PropertyActionTypes.PropertiesPageCancelled:\r\n      return {\r\n        ...state, listLoading: false, lastQuery: new QueryParamsModel({})\r\n      };\r\n    case PropertyActionTypes.PropertiesPageLoaded:\r\n      return adapter.addMany(action.payload.properties, {\r\n        ...initialPropertiesState,\r\n        totalCount: action.payload.totalCount,\r\n        listLoading: false,\r\n        lastQuery: action.payload.page,\r\n        showInitWaitingMessage: false\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const getPropertiestate = createFeatureSelector<PropertyModel>('properties');\r\n\r\nexport const {\r\n  selectAll,\r\n  selectEntities,\r\n  selectIds,\r\n  selectTotal\r\n} = adapter.getSelectors();\r\n"]}