{"version":3,"sources":["properties-list.component.ts"],"names":[],"mappings":"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","file":"properties-list.component.js","sourcesContent":["import { Component, OnInit, ElementRef, ViewChild, ChangeDetectionStrategy, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { MatSort } from '@angular/material/sort';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { SelectionModel } from '@angular/cdk/collections';\r\nimport { debounceTime, distinctUntilChanged, tap, skip, delay } from 'rxjs/operators';\r\nimport { fromEvent, merge, Observable, of, Subscription } from 'rxjs';\r\nimport { Store, select } from '@ngrx/store';\r\nimport { AppState } from '../../../../../../core/reducers';\r\nimport { SubheaderService } from '../../../../../../core/_base/layout';\r\n\r\nimport { LayoutUtilsService, MessageType, QueryParamsModel } from '../../../../../../core/_base/crud';\r\nimport {\r\n\tPropertyModel,\r\n\tPropertiesDataSource,\r\n\tPropertiesPageRequested,\r\n\tOnePropertyDeleted,\r\n\tManyPropertiesDeleted,\r\n\tPropertiesStatusUpdated,\r\n\tselectProductsPageLastQuery\r\n} from '../../../../../../core/e-commerce';\r\n\r\n@Component({\r\n\tselector: 'app-properties-list',\r\n\ttemplateUrl: './properties-list.component.html',\r\n\tchangeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class PropertiesListComponent implements OnInit, OnDestroy {\r\n\r\n\tdataSource: PropertiesDataSource;\r\n\r\n\tdisplayedColumns = ['select', 'id', 'title', 'type', 'city', 'color', 'price', 'condition', 'status', 'actions'];\r\n\r\n\t@ViewChild(MatPaginator, { static: true }) paginator: MatPaginator;\r\n\r\n\t@ViewChild('sort1', { static: true }) sort: MatSort;\r\n\r\n\t@ViewChild('searchInput', { static: true }) searchInput: ElementRef;\r\n\r\n\tfilterStatus = '';\r\n\r\n\tfilterCondition = '';\r\n\r\n\tlastQuery: QueryParamsModel;\r\n\r\n\tselection = new SelectionModel<PropertyModel>(true, []);\r\n\r\n\tpropertiesResult: PropertyModel[] = [];\r\n\r\n\tprivate subscriptions: Subscription[] = [];\r\n\r\n\tconstructor(\r\n\t\tpublic dialog: MatDialog,\r\n\t\tprivate activatedRoute: ActivatedRoute,\r\n\t\tprivate router: Router,\r\n\t\tprivate subheaderService: SubheaderService,\r\n\t\tprivate layoutUtilsService: LayoutUtilsService,\r\n\t\tprivate store: Store<AppState>\r\n\t) {\r\n\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tconst sortSubscription = this.sort.sortChange.subscribe(() => (this.paginator.pageIndex = 0));\r\n\t\tthis.subscriptions.push(sortSubscription);\r\n\t\tconst paginatorSubscriptions = merge(this.sort.sortChange, this.paginator.page)\r\n\t\t\t.pipe(\r\n\t\t\t\ttap(() => this.loadPropertiesList())\r\n\t\t\t)\r\n\t\t\t.subscribe();\r\n\t\tthis.subscriptions.push(paginatorSubscriptions);\r\n\r\n\t\tconst searchSubscription = fromEvent(this.searchInput.nativeElement, 'keyup')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(150),\r\n\t\t\t\tdistinctUntilChanged(),\r\n\t\t\t\ttap(() => {\r\n\t\t\t\t\tthis.paginator.pageIndex = 0;\r\n\t\t\t\t\tthis.loadPropertiesList();\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe();\r\n\t\tthis.subscriptions.push(searchSubscription);\r\n\r\n\t\tthis.subheaderService.setTitle('Properties');\r\n\r\n\t\tthis.dataSource = new PropertiesDataSource(this.store);\r\n\t\tconst entitiesSubscription = this.dataSource.entitySubject.pipe(\r\n\t\t\tskip(1),\r\n\t\t\tdistinctUntilChanged()\r\n\t\t).subscribe(res => {\r\n\t\t\tthis.propertiesResult = res;\r\n\t\t});\r\n\t\tthis.subscriptions.push(entitiesSubscription);\r\n\t\tconst lastQuerySubscription = this.store.pipe(select(selectProductsPageLastQuery))\r\n\t\t\t.subscribe(res => this.lastQuery = res);\r\n\t\tthis.subscriptions.push(lastQuerySubscription);\r\n\r\n\t\tconst routeSubscription = this.activatedRoute.queryParams.subscribe(params => {\r\n\t\t\tif (params.id) {\r\n\t\t\t\tthis.restoreState(this.lastQuery, +params.id);\r\n\t\t\t}\r\n\t\t\tof(undefined).pipe(delay(1000)).subscribe(() => {\r\n\t\t\t\tthis.loadPropertiesList();\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.subscriptions.push(routeSubscription);\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tthis.subscriptions.forEach(el => el.unsubscribe());\r\n\t}\r\n\r\n\tloadPropertiesList(): void {\r\n\t\tthis.selection.clear();\r\n\t\tconst queryParams = new QueryParamsModel(\r\n\t\t\tthis.filterConfiguration(),\r\n\t\t\tthis.sort.direction,\r\n\t\t\tthis.sort.active,\r\n\t\t\tthis.paginator.pageIndex,\r\n\t\t\tthis.paginator.pageSize\r\n\t\t);\r\n\t\tthis.store.dispatch(new PropertiesPageRequested({ page: queryParams }));\r\n\t\tthis.selection.clear();\r\n\t}\r\n\r\n\tfilterConfiguration(): any {\r\n\t\tconst filter: any = {};\r\n\t\tfilter.title = this.searchInput.nativeElement.value;\r\n\t\treturn filter;\r\n\t}\r\n\r\n\trestoreState(queryParams: QueryParamsModel, id: number) {\r\n\t\tif (!queryParams.filter) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ('condition' in queryParams.filter) {\r\n\t\t\tthis.filterCondition = queryParams.filter.condition.toString();\r\n\t\t}\r\n\t\tif ('status' in queryParams.filter) {\r\n\t\t\tthis.filterStatus = queryParams.filter.status.toString();\r\n\t\t}\r\n\t\tif (queryParams.filter.model) {\r\n\t\t\tthis.searchInput.nativeElement.value = queryParams.filter.model;\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteProduct(_item: PropertyModel) {\r\n\t\tconst _title = 'Property Delete';\r\n\t\tconst _description = 'Are you sure to permanently delete this property?';\r\n\t\tconst _waitDesciption = 'Property is deleting...';\r\n\t\tconst _deleteMessage = `Property has been deleted`;\r\n\r\n\t\tconst dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.store.dispatch(new OnePropertyDeleted({ id: _item.id }));\r\n\t\t\tthis.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteProducts() {\r\n\t\tconst _title = 'Properties Delete';\r\n\t\tconst _description = 'Are you sure to permanently delete selected properties?';\r\n\t\tconst _waitDesciption = 'Properties are deleting...';\r\n\t\tconst _deleteMessage = 'Selected properties have been deleted';\r\n\r\n\t\tconst dialogRef = this.layoutUtilsService.deleteElement(_title, _description, _waitDesciption);\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst idsForDeletion: string[] = [];\r\n\t\t\t// tslint:disable-next-line:prefer-for-of\r\n\t\t\tfor (let i = 0; i < this.selection.selected.length; i++) {\r\n\t\t\t\tidsForDeletion.push(this.selection.selected[i].id);\r\n\t\t\t}\r\n\t\t\tthis.store.dispatch(new ManyPropertiesDeleted({ ids: idsForDeletion }));\r\n\t\t\tthis.layoutUtilsService.showActionNotification(_deleteMessage, MessageType.Delete);\r\n\t\t\tthis.selection.clear();\r\n\t\t});\r\n\t}\r\n\r\n\tfetchProducts() {\r\n\t\t// tslint:disable-next-line:prefer-const\r\n\t\tlet messages = [];\r\n\t\tthis.selection.selected.forEach(elem => {\r\n\t\t\tmessages.push({\r\n\t\t\t\ttext: `${elem.desc} ${elem.neighborhood}`,\r\n\t\t\t\tid: elem.id,\r\n\t\t\t\tstatus: elem.title\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.layoutUtilsService.fetchElements(messages);\r\n\t}\r\n\r\n\tupdateStatusForProducts() {\r\n\t\tconst _title = 'Update status for selected properties';\r\n\t\tconst _updateMessage = 'Status has been updated for selected properties';\r\n\t\tconst _statuses = [{ value: 0, text: 'Selling' }, { value: 1, text: 'Sold' }];\r\n\t\tconst _messages = [];\r\n\r\n\t\t/*this.selection.selected.forEach(elem => {\r\n\t\t\t_messages.push({\r\n\t\t\t\t// text: `${elem.manufacture} ${elem.model} ${elem.modelYear}`,\r\n\t\t\t\t// id: elem.VINCode,\r\n\t\t\t\t// status: elem.status,\r\n\t\t\t\t// statusTitle: this.getItemStatusString(elem.status),\r\n\t\t\t\t// statusCssClass: this.getItemCssClassByStatus(elem.status)\r\n\t\t\t});\r\n\t\t});*/\r\n\r\n\t\tconst dialogRef = this.layoutUtilsService.updateStatusForEntities(_title, _statuses, _messages);\r\n\t\tdialogRef.afterClosed().subscribe(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\tthis.selection.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.store.dispatch(new PropertiesStatusUpdated({\r\n\t\t\t\tstatus: +res,\r\n\t\t\t\tproperties: this.selection.selected\r\n\t\t\t}));\r\n\r\n\t\t\tthis.layoutUtilsService.showActionNotification(_updateMessage, MessageType.Update);\r\n\t\t\tthis.selection.clear();\r\n\t\t});\r\n\t}\r\n\r\n\teditProduct(id: string): void {\r\n\t\tthis.router.navigate(['../properties/edit', id], { relativeTo: this.activatedRoute });\r\n\t}\r\n\r\n\tcreateProperties(): void {\r\n\t\tthis.router.navigateByUrl('/ecommerce/properties/add');\r\n\t}\r\n\r\n\tisAllSelected() {\r\n\t\tconst numSelected = this.selection.selected.length;\r\n\t\tconst numRows = this.propertiesResult.length;\r\n\t\treturn numSelected === numRows;\r\n\t}\r\n\r\n\tmasterToggle(): void {\r\n\t\tif (this.isAllSelected()) {\r\n\t\t\tthis.selection.clear();\r\n\t\t} else {\r\n\t\t\tthis.propertiesResult.forEach(row => this.selection.select(row));\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemStatusString(status: number = 0): string {\r\n\t\tswitch (status) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn 'Selling';\r\n\t\t\tcase 1:\r\n\t\t\t\treturn 'Sold';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tgetItemCssClassByStatus(status: number = 0): string {\r\n\t\tswitch (status) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn 'success';\r\n\t\t\tcase 1:\r\n\t\t\t\treturn 'metal';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tgetItemConditionString(condition: number = 0): string {\r\n\t\tswitch (condition) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn 'New';\r\n\t\t\tcase 1:\r\n\t\t\t\treturn 'Used';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tgetItemCssClassByCondition(condition: number = 0): string {\r\n\t\tswitch (condition) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn 'danger';\r\n\t\t\tcase 1:\r\n\t\t\t\treturn 'primary';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n}\r\n"]}