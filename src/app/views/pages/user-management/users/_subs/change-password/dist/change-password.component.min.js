"use strict";var __decorate=this&&this.__decorate||function(r,t,e,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(r,t,e,o);else for(var n=r.length-1;0<=n;n--)(s=r[n])&&(i=(a<3?s(i):3<a?s(t,e,i):s(t,e))||i);return 3<a&&i&&Object.defineProperty(t,e,i),i};exports.__esModule=!0;var core_1=require("@angular/core"),forms_1=require("@angular/forms"),rxjs_1=require("rxjs"),auth_1=require("../../../../../../core/auth/"),crud_1=require("../../../../../../core/_base/crud"),PasswordValidation=function(){function r(){}return r.MatchPassword=function(r){if(r.get("password").value===r.get("confirmPassword").value)return null;r.get("confirmPassword").setErrors({MatchPassword:!0})},r}();exports.PasswordValidation=PasswordValidation;var ChangePasswordComponent=function(){function r(r,t,e,o){this.fb=r,this.auth=t,this.store=e,this.layoutUtilsService=o,this.loadingSubject=new rxjs_1.BehaviorSubject(!1),this.hasFormErrors=!1}return r.prototype.ngOnInit=function(){this.loadData()},r.prototype.loadData=function(){var t=this;this.auth.getUserById(this.userId).subscribe(function(r){t.user=r,t.createForm()})},r.prototype.createForm=function(){this.changePasswordForm=this.fb.group({password:["",forms_1.Validators.required],confirmPassword:["",forms_1.Validators.required]})},r.prototype.reset=function(){this.hasFormErrors=!1,this.loadingSubject.next(!1),this.changePasswordForm.markAsPristine(),this.changePasswordForm.markAsUntouched(),this.changePasswordForm.updateValueAndValidity()},r.prototype.onSubmit=function(){this.loadingSubject.next(!0),this.hasFormErrors=!1;var t=this.changePasswordForm.controls;if(this.changePasswordForm.invalid)return Object.keys(t).forEach(function(r){return t[r].markAsTouched()}),this.hasFormErrors=!0,void this.loadingSubject.next(!1);this.user.password=t.password.value;var r={id:this.user.id,changes:this.user};this.store.dispatch(new auth_1.UserUpdated({partialUser:r,user:this.user})),this.loadData(),this.loadingSubject.next(!1);this.layoutUtilsService.showActionNotification("User password successfully has been changed.",crud_1.MessageType.Update,5e3,!0,!1),this.reset()},r.prototype.onAlertClose=function(r){this.hasFormErrors=!1},__decorate([core_1.Input()],r.prototype,"userId"),__decorate([core_1.Input()],r.prototype,"loadingSubject"),r=__decorate([core_1.Component({selector:"kt-change-password",templateUrl:"./change-password.component.html"})],r)}();exports.ChangePasswordComponent=ChangePasswordComponent;
//# sourceMappingURL=change-password.component.min.js.map
